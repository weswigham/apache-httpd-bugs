Received: (qmail 12461 invoked by uid 2012); 6 Aug 1999 20:48:46 -0000
Message-Id: <19990806204846.12460.qmail@hyperreal.org>
Date: 6 Aug 1999 20:48:46 -0000
From: Eric Griswold <eric@isyndicate.com>
Reply-To: eric@isyndicate.com
To: apbugs@hyperreal.org
Subject: Segmentation Violation/Core Dump when running a perl program with a server compiled with mod_perl and php3
X-Send-Pr-Version: 3.2

>Number:         4831
>Category:       general
>Synopsis:       Segmentation Violation/Core Dump when running a perl program with a server compiled with mod_perl and php3
>Confidential:   no
>Severity:       critical
>Priority:       medium
>Responsible:    apache
>State:          open
>Class:          sw-bug
>Submitter-Id:   apache
>Arrival-Date:   Fri Aug  6 13:50:00 PDT 1999
>Last-Modified:
>Originator:     eric@isyndicate.com
>Organization:
apache
>Release:        1.3.6
>Environment:
OS: Redhat 6.0 i386 Running on a Dell XPSD233: 
	Linux fuzzy.isyndicate.com 2.2.5-15 #1 Mon Apr 19 23:00:46 EDT 1999 i686 unknown
	gcc --version == egcs-2.91.66

Replicated on Solaris Ultra 5:
	SunOS ul10 5.5.1 Generic_103640-17 sun4u sparc SUNW,Ultra-5_10
	gcc --version = 2.7.2.1

mod_perl version 1.21
php version 3.0.11
mysql  Ver 9.32 Distrib 3.22.23b, for pc-linux-gnu (i686)
>Description:
apache thread crash running perl prog that attaches to mysql.
This >might< be a red herring, but it only seems to crash in instances
where both mod_perl and php3 modules (both static) exist in the server.


gdb bin/httpd core
GNU gdb 4.17.0.11 with Linux support
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-redhat-linux"...
(no debugging symbols found)...
Core was generated by `/usr/local/apache/bin/httpd'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /lib/libpam.so.0...done.
Reading symbols from /lib/libm.so.6...done.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /lib/libcrypt.so.1...done.
Reading symbols from /lib/libnsl.so.1...done.
Reading symbols from /lib/libresolv.so.2...done.
Reading symbols from /usr/lib/libgdbm.so.2...done.
Reading symbols from /usr/local/lib/mysql/libmysqlclient.so.6...done.
Reading symbols from /lib/libdb.so.3...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/ld-linux.so.2...done.
Reading symbols from /lib/libnss_nisplus.so.2...done.
Reading symbols from /lib/libnss_files.so.2...done.
Reading symbols from /usr/lib/perl5/site_perl/5.005/i386-linux/auto/DBI/DBI.so...done.
Reading symbols from /usr/lib/perl5/site_perl/5.005/i386-linux/auto/DBD/mysql/mysql.so...done.
Reading symbols from /usr/lib/perl5/5.00503/i386-linux/auto/IO/IO.so...done.
Reading symbols from /usr/lib/perl5/5.00503/i386-linux/auto/Fcntl/Fcntl.so...
done.
Reading symbols from /usr/lib/perl5/5.00503/i386-linux/auto/Socket/Socket.so...
done.
#0  0x4009d2f7 in mysql_real_connect ()
(gdb) where
#0  0x4009d2f7 in mysql_real_connect ()
#1  0x401fa973 in mysql_dr_connect ()
#2  0x401faced in _MyLogin ()
#3  0x401fad6f in mysql_db_login ()
#4  0x401fd440 in XS_DBD__mysql__db__login ()
#5  0x812c706 in Perl_pp_entersub ()
#6  0x815657d in Perl_runops_standard ()
#7  0x80fea41 in perl_call_sv ()
#8  0x401ec733 in XS_DBI_dispatch ()
#9  0x812c706 in Perl_pp_entersub ()
#10 0x815657d in Perl_runops_standard ()
#11 0x80fea41 in perl_call_sv ()
#12 0x80bbbeb in perl_call_handler ()
#13 0x80bb5ad in perl_run_stacked_handlers ()
#14 0x80ba4fd in perl_handler ()
#15 0x80d2fc3 in ap_invoke_handler ()
#16 0x80e5d09 in ap_some_auth_required ()
#17 0x80e5d6c in ap_process_request ()
#18 0x80ddafe in ap_child_terminate ()
#19 0x80ddd3c in ap_child_terminate ()
#20 0x80ddde9 in ap_child_terminate ()
#21 0x80de406 in ap_child_terminate ()
#22 0x80deb73 in main ()
#23 0x400fdcb3 in __libc_start_main (main=0x80de84c <main>, argc=1, 
    argv=0xbffffa94, init=0x806961c <_init>, fini=0x815665c <_fini>, 
    rtld_fini=0x4000a350 <_dl_fini>, stack_end=0xbffffa8c)
    at ../sysdeps/generic/libc-start.c:78
(gdb) 
>How-To-Repeat:
http://fuzzy.isyndicate.com:8080/scripts/rc_html

[Contact me for a temporary account on this machine if you need it.]
>Fix:
No clue.
>Audit-Trail:
>Unformatted:
[In order for any reply to be added to the PR database, you need]
[to include <apbugs@Apache.Org> in the Cc line and make sure the]
[subject line starts with the report component and number, with ]
[or without any 'Re:' prefixes (such as "general/1098:" or      ]
["Re: general/1098:").  If the subject doesn't match this       ]
[pattern, your message will be misfiled and ignored.  The       ]
["apbugs" address is not added to the Cc line of messages from  ]
[the database automatically because of the potential for mail   ]
[loops.  If you do not include this Cc, your reply may be ig-   ]
[nored unless you are responding to an explicit request from a  ]
[developer.  Reply only with text; DO NOT SEND ATTACHMENTS!     ]



