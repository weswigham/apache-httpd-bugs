Received: (qmail 19807 invoked by uid 2012); 24 May 1998 22:41:35 -0000
Message-Id: <19980524224135.19806.qmail@hyperreal.org>
Date: 24 May 1998 22:41:35 -0000
From: Vladislav Malyshkin <malyshki@cs.wmich.edu>
Reply-To: malyshki@cs.wmich.edu
To: apbugs@hyperreal.org
Subject: mailformed header in the case of 503 code
X-Send-Pr-Version: 3.2

>Number:         2275
>Category:       general
>Synopsis:       mailformed header in the case of 503 code
>Confidential:   no
>Severity:       non-critical
>Priority:       medium
>Responsible:    apache
>State:          closed
>Class:          sw-bug
>Submitter-Id:   apache
>Arrival-Date:   Sun May 24 15:50:00 PDT 1998
>Last-Modified:  Tue May 26 10:10:00 PDT 1998
>Originator:     malyshki@cs.wmich.edu
>Organization:
>Release:        1.3b6
>Environment:
Linux RedHat 5.0 gcc
>Description:
In the case of 503 code server prints mailformed header:
(It does not print 
Server:
Connection: close
etc.)

This error happens on servers running Apache 1.2.6 and 1.3b6

Example:

mal2@vladik2 /tmp:  telnet freshmeat.net 80
Trying 199.183.24.237...
Connected to freshmeat.net.
Escape character is '^]'.
HEAD / HTTP/1.0

HTTP/1.0 503 Service Unavailable
Content-Type: text/html
Date: Sun, 24 May 1998 22:31:58 GMT

<HTML>
<HEAD> <TITLE>Problem Report</TITLE> </HEAD>
<BODY>
<B><FONT SIZE=+1>Problem Report</FONT></B>
<P>HTTP Error <B>503</B> occurred while attempting to retrieve the URL: '<B>http://199.183.24.237/</B>'.<BR><HR WIDTH="100%">
<B>Problem Description:</B><BR>Connect failed to server '199.183.24.237'.<BR><BR><CENTER><TABLE BORDER COLS=2 WIDTH="100%" ><TR>
<TD><B>Possible Problem Cause</B></TD><TD><B>Solutions</B></TD></TR>
<TR> <TD>The server is busy</TD>  <TD>Try again, later</TD>  </TR></TABLE></CENTER><BR><HR WIDTH="100%">
</BODY></HTML>Connection closed by foreign host.
mal2@vladik2 /tmp: 

In the other time:
mal2@vladik2 /tmp:  telnet freshmeat.net 80
Trying 199.183.24.237...
Connected to freshmeat.net.
Escape character is '^]'.
HEAD / HTTP/1.0

HTTP/1.0 200 OK
Date: Sun, 24 May 1998 22:36:43 GMT
Server: Apache/1.3b6 PHP/3.0RC4
Connection: close
Content-Type: text/html

Connection closed by foreign host.
mal2@vladik2 /tmp: 


>How-To-Repeat:
see logs above
>Fix:
no
>Audit-Trail:

From: Marc Slemko <marcs@znep.com>
To: Vladislav Malyshkin <malyshki@cs.wmich.edu>
Cc: apbugs@hyperreal.org
Subject: Re: general/2275: mailformed header in the case of 503 code
Date: Sun, 24 May 1998 15:59:09 -0700 (PDT)

 On 24 May 1998, Vladislav Malyshkin wrote:
 
 > 
 > >Number:         2275
 > >Category:       general
 > >Synopsis:       mailformed header in the case of 503 code
 > >Confidential:   no
 > >Severity:       non-critical
 > >Priority:       medium
 > >Responsible:    apache
 > >State:          open
 > >Class:          sw-bug
 > >Submitter-Id:   apache
 > >Arrival-Date:   Sun May 24 15:50:00 PDT 1998
 > >Last-Modified:
 > >Originator:     malyshki@cs.wmich.edu
 > >Organization:
 > apache
 > >Release:        1.3b6
 > >Environment:
 > Linux RedHat 5.0 gcc
 > >Description:
 > In the case of 503 code server prints mailformed header:
 > (It does not print 
 > Server:
 > Connection: close
 > etc.)
 > 
 > This error happens on servers running Apache 1.2.6 and 1.3b6
 
 Erm... what is your connection to freshmeat.net?
 
 Why do you say the header is malformed?  It is not normal, but just
 because it doesn't print all the headers it normally does doesn't mean it
 is "malformed".
 
 
 > 
 > Example:
 > 
 > mal2@vladik2 /tmp:  telnet freshmeat.net 80
 > Trying 199.183.24.237...
 > Connected to freshmeat.net.
 > Escape character is '^]'.
 > HEAD / HTTP/1.0
 > 
 > HTTP/1.0 503 Service Unavailable
 > Content-Type: text/html
 > Date: Sun, 24 May 1998 22:31:58 GMT
 
 Are you sure this is being generated by Apache?  It is a 1.0 response, so
 either the server is configured in a special way or this is really some
 other script returning the headers.
 
 There is nothing in the output you give that I notice as being invalid.
 Not usual, but certainly possible to setup Apache to generate.
 

From: Vladislav Malyshkin <malyshki@cs.wmich.edu>
To: Marc Slemko <marcs@znep.com>
Cc: apbugs@hyperreal.org
Subject: Re: general/2275: mailformed header in the case of 503 code
Date: Sun, 24 May 1998 19:18:08 -0400 (EDT)

 I am not connected to freshmeat.net in any way.
 I just looked at the header after I got 503 header from them.
 After that I tried several heavily loaded sites
 for example: www.jennicam.org. 
 Some times it give exactly the same header as freashmeat.net.
 Also you can get this reply from tsx-11.mit.edu (but I am not sure
 that they run >=apache 1.2)
 
 
 mal2@vladik2 /tmp: telnet tsx-11.mit.edu 80                   
 Trying 18.86.0.44...
 Connected to tsx-11.mit.edu.
 Escape character is '^]'.
 HEAD / HTTP/1.0
 
 HTTP/1.0 503 Service Unavailable
 Content-Type: text/html
 Date: Sun, 24 May 1998 23:09:06 GMT
 
 <HTML>
 <HEAD> <TITLE>Problem Report</TITLE> </HEAD>
 <BODY>
 <B><FONT SIZE=+1>Problem Report</FONT></B>
 <P>HTTP Error <B>503</B> occurred while attempting to retrieve the URL:
 '<B>http://18.86.0.44/</B>'.<BR><HR WIDTH="100%">
 <B>Problem Description:</B><BR>Connect failed to server
 '18.86.0.44'.<BR><BR><CENTER><TABLE BORDER COLS=2 WIDTH="100%" ><TR>
 <TD><B>Possible Problem Cause</B></TD><TD><B>Solutions</B></TD></TR>
 <TR> <TD>The server is busy</TD>  <TD>Try again, later</TD>
 </TR></TABLE></CENTER><BR><HR WIDTH="100%">
 </BODY></HTML>Connection closed by foreign host.
 mal2@vladik2 /tmp: 
 
 
 -----------
 now it prints OK, but try in the business day.
 Some times gives a header as  at freshmeat.net
 
 mal2@vladik2 /tmp: telnet www.jennicam.org 80
 Trying 209.113.141.201...
 Connected to www.jennicam.org.
 Escape character is '^]'.
 HEAD / HTTP/1.0
 
 HTTP/1.0 200 OK
 Date: Sun, 24 May 1998 23:05:23 GMT
 Server: Apache/1.2.5
 Last-Modified: Tue, 19 May 1998 04:26:02 GMT
 ETag: "93175-648-356109da"
 Content-Length: 1608
 Accept-Ranges: none 
 Connection: close
 Content-Type: text/html
 
 Connection closed by foreign host.
 mal2@vladik2 /tmp: 
 
 --------------------------
 
 I agree, that header is incomlite and not mailformed.
 I wrote not precisely accurate.
 
 Vladislav
 
 On Sun, 24 May 1998, Marc Slemko wrote:
 
 > On 24 May 1998, Vladislav Malyshkin wrote:
 > 
 > > 
 > > >Number:         2275
 > > >Category:       general
 > > >Synopsis:       mailformed header in the case of 503 code
 > > >Confidential:   no
 > > >Severity:       non-critical
 > > >Priority:       medium
 > > >Responsible:    apache
 > > >State:          open
 > > >Class:          sw-bug
 > > >Submitter-Id:   apache
 > > >Arrival-Date:   Sun May 24 15:50:00 PDT 1998
 > > >Last-Modified:
 > > >Originator:     malyshki@cs.wmich.edu
 > > >Organization:
 > > apache
 > > >Release:        1.3b6
 > > >Environment:
 > > Linux RedHat 5.0 gcc
 > > >Description:
 > > In the case of 503 code server prints mailformed header:
 > > (It does not print 
 > > Server:
 > > Connection: close
 > > etc.)
 > > 
 > > This error happens on servers running Apache 1.2.6 and 1.3b6
 > 
 > Erm... what is your connection to freshmeat.net?
 > 
 > Why do you say the header is malformed?  It is not normal, but just
 > because it doesn't print all the headers it normally does doesn't mean it
 > is "malformed".
 > 
 > 
 > > 
 > > Example:
 > > 
 > > mal2@vladik2 /tmp:  telnet freshmeat.net 80
 > > Trying 199.183.24.237...
 > > Connected to freshmeat.net.
 > > Escape character is '^]'.
 > > HEAD / HTTP/1.0
 > > 
 > > HTTP/1.0 503 Service Unavailable
 > > Content-Type: text/html
 > > Date: Sun, 24 May 1998 22:31:58 GMT
 > 
 > Are you sure this is being generated by Apache?  It is a 1.0 response, so
 > either the server is configured in a special way or this is really some
 > other script returning the headers.
 > 
 > There is nothing in the output you give that I notice as being invalid.
 > Not usual, but certainly possible to setup Apache to generate.
 > 
 > 
 
State-Changed-From-To: open-closed
State-Changed-By: marc
State-Changed-When: Sun May 24 17:43:23 PDT 1998
State-Changed-Why:
Nothing to do with Apache.  The sites in question have
probably installed some software designed to limit the
number of requests being served.

A default install of Apache won't do this, and there really
isn't anything wrong with the results being returned.

From: Marc Slemko <marcs@znep.com>
To: Vladislav Malyshkin <malyshki@cs.wmich.edu>
Cc: apbugs@hyperreal.org
Subject: Re: general/2275: mailformed header in the case of 503 code
Date: Tue, 26 May 1998 09:48:03 -0700 (PDT)

 On Tue, 26 May 1998, Vladislav Malyshkin wrote:
 
 > 
 > It looks like missed fields in header is because of Apache,
 > and not because of external script:
 > example:
 > (it prints Last-Modified, etc, it looks like a plain file)
 
 Sigh.  Once again, there are no "missed" fields.  There is no obligation
 of the server to include any of the fields you are complaining about being
 missing.
 
 As I said before, these sites are almost certainly running a script
 designed to reject requests when the load is too high.  That script is the
 one generating the 503 and the headers of the 503.  Since the whole point
 of the script is to only output things when the load is "too high", of
 course it will be different when the script doesn't handle it because the
 load isn't too high.
 
 > 
 > mal2@vladik2 ~/clr/correlations/doc: telnet www.arm.uk.linux.org 80
 > Trying 163.164.160.3...
 > Connected to snowcrash.cymru.net.
 > Escape character is '^]'.
 > HEAD / HTTP/1.0
 > 
 > HTTP/1.0 503 Service Unavailable
 > Content-Type: text/html
 > Date: Tue, 26 May 1998 15:34:12 GMT
 > 
 > <HTML>
 > <HEAD> <TITLE>Problem Report</TITLE> </HEAD>
 > <BODY>
 > <B><FONT SIZE=+1>Problem Report</FONT></B>
 > <P>HTTP Error <B>503</B> occurred while attempting to retrieve the URL:
 > '<B>http://163.164.160.3/</B>'.<BR><HR WIDTH="100%">
 > <B>Problem Description:</B><BR>Connect failed to server
 > '163.164.160.3'.<BR><BR><CENTER><TABLE BORDER COLS=2 WIDTH="100%" ><TR>
 > <TD><B>Possible Problem Cause</B></TD><TD><B>Solutions</B></TD></TR>
 > <TR> <TD>The server is busy</TD>  <TD>Try again, later</TD>
 > </TR></TABLE></CENTER><BR><HR WIDTH="100%">
 > </BODY></HTML>Connection closed by foreign host.
 > mal2@vladik2 ~/clr/correlations/doc: telnet www.arm.uk.linux.org 80
 > Trying 163.164.160.3...
 > Connected to snowcrash.cymru.net.
 > Escape character is '^]'.
 > HEAD / HTTP/1.0
 > 
 > HTTP/1.0 200 OK
 > Date: Tue, 26 May 1998 15:38:15 GMT
 > Server: Apache/1.2.5
 > Last-Modified: Fri, 22 Aug 1997 11:30:27 GMT
 > ETag: "e839-519-33fd7853"
 > Content-Length: 1305
 > Accept-Ranges: none 
 > Connection: close
 > Content-Type: text/html
 > 
 > Connection closed by foreign host.
 > mal2@vladik2 ~/clr/correlations/doc:
 > 
 > 
 > 
 > 
 > 
 > On Sun, 24 May 1998, Marc Slemko wrote:
 > 
 > > On 24 May 1998, Vladislav Malyshkin wrote:
 > > 
 > > > 
 > > > >Number:         2275
 > > > >Category:       general
 > > > >Synopsis:       mailformed header in the case of 503 code
 > > > >Confidential:   no
 > > > >Severity:       non-critical
 > > > >Priority:       medium
 > > > >Responsible:    apache
 > > > >State:          open
 > > > >Class:          sw-bug
 > > > >Submitter-Id:   apache
 > > > >Arrival-Date:   Sun May 24 15:50:00 PDT 1998
 > > > >Last-Modified:
 > > > >Originator:     malyshki@cs.wmich.edu
 > > > >Organization:
 > > > apache
 > > > >Release:        1.3b6
 > > > >Environment:
 > > > Linux RedHat 5.0 gcc
 > > > >Description:
 > > > In the case of 503 code server prints mailformed header:
 > > > (It does not print 
 > > > Server:
 > > > Connection: close
 > > > etc.)
 > > > 
 > > > This error happens on servers running Apache 1.2.6 and 1.3b6
 > > 
 > > Erm... what is your connection to freshmeat.net?
 > > 
 > > Why do you say the header is malformed?  It is not normal, but just
 > > because it doesn't print all the headers it normally does doesn't mean it
 > > is "malformed".
 > > 
 > > 
 > > > 
 > > > Example:
 > > > 
 > > > mal2@vladik2 /tmp:  telnet freshmeat.net 80
 > > > Trying 199.183.24.237...
 > > > Connected to freshmeat.net.
 > > > Escape character is '^]'.
 > > > HEAD / HTTP/1.0
 > > > 
 > > > HTTP/1.0 503 Service Unavailable
 > > > Content-Type: text/html
 > > > Date: Sun, 24 May 1998 22:31:58 GMT
 > > 
 > > Are you sure this is being generated by Apache?  It is a 1.0 response, so
 > > either the server is configured in a special way or this is really some
 > > other script returning the headers.
 > > 
 > > There is nothing in the output you give that I notice as being invalid.
 > > Not usual, but certainly possible to setup Apache to generate.
 > > 
 > > 
 > 
 

From: Vladislav Malyshkin <malyshki@cs.wmich.edu>
To: Marc Slemko <marcs@znep.com>
Cc: apbugs@hyperreal.org
Subject: Re: general/2275: mailformed header in the case of 503 code
Date: Tue, 26 May 1998 11:56:43 -0400 (EDT)

 It looks like missed fields in header is because of Apache,
 and not because of external script:
 example:
 (it prints Last-Modified, etc, it looks like a plain file)
 
 mal2@vladik2 ~/clr/correlations/doc: telnet www.arm.uk.linux.org 80
 Trying 163.164.160.3...
 Connected to snowcrash.cymru.net.
 Escape character is '^]'.
 HEAD / HTTP/1.0
 
 HTTP/1.0 503 Service Unavailable
 Content-Type: text/html
 Date: Tue, 26 May 1998 15:34:12 GMT
 
 <HTML>
 <HEAD> <TITLE>Problem Report</TITLE> </HEAD>
 <BODY>
 <B><FONT SIZE=+1>Problem Report</FONT></B>
 <P>HTTP Error <B>503</B> occurred while attempting to retrieve the URL:
 '<B>http://163.164.160.3/</B>'.<BR><HR WIDTH="100%">
 <B>Problem Description:</B><BR>Connect failed to server
 '163.164.160.3'.<BR><BR><CENTER><TABLE BORDER COLS=2 WIDTH="100%" ><TR>
 <TD><B>Possible Problem Cause</B></TD><TD><B>Solutions</B></TD></TR>
 <TR> <TD>The server is busy</TD>  <TD>Try again, later</TD>
 </TR></TABLE></CENTER><BR><HR WIDTH="100%">
 </BODY></HTML>Connection closed by foreign host.
 mal2@vladik2 ~/clr/correlations/doc: telnet www.arm.uk.linux.org 80
 Trying 163.164.160.3...
 Connected to snowcrash.cymru.net.
 Escape character is '^]'.
 HEAD / HTTP/1.0
 
 HTTP/1.0 200 OK
 Date: Tue, 26 May 1998 15:38:15 GMT
 Server: Apache/1.2.5
 Last-Modified: Fri, 22 Aug 1997 11:30:27 GMT
 ETag: "e839-519-33fd7853"
 Content-Length: 1305
 Accept-Ranges: none 
 Connection: close
 Content-Type: text/html
 
 Connection closed by foreign host.
 mal2@vladik2 ~/clr/correlations/doc:
 
 
 
 
 
 On Sun, 24 May 1998, Marc Slemko wrote:
 
 > On 24 May 1998, Vladislav Malyshkin wrote:
 > 
 > > 
 > > >Number:         2275
 > > >Category:       general
 > > >Synopsis:       mailformed header in the case of 503 code
 > > >Confidential:   no
 > > >Severity:       non-critical
 > > >Priority:       medium
 > > >Responsible:    apache
 > > >State:          open
 > > >Class:          sw-bug
 > > >Submitter-Id:   apache
 > > >Arrival-Date:   Sun May 24 15:50:00 PDT 1998
 > > >Last-Modified:
 > > >Originator:     malyshki@cs.wmich.edu
 > > >Organization:
 > > apache
 > > >Release:        1.3b6
 > > >Environment:
 > > Linux RedHat 5.0 gcc
 > > >Description:
 > > In the case of 503 code server prints mailformed header:
 > > (It does not print 
 > > Server:
 > > Connection: close
 > > etc.)
 > > 
 > > This error happens on servers running Apache 1.2.6 and 1.3b6
 > 
 > Erm... what is your connection to freshmeat.net?
 > 
 > Why do you say the header is malformed?  It is not normal, but just
 > because it doesn't print all the headers it normally does doesn't mean it
 > is "malformed".
 > 
 > 
 > > 
 > > Example:
 > > 
 > > mal2@vladik2 /tmp:  telnet freshmeat.net 80
 > > Trying 199.183.24.237...
 > > Connected to freshmeat.net.
 > > Escape character is '^]'.
 > > HEAD / HTTP/1.0
 > > 
 > > HTTP/1.0 503 Service Unavailable
 > > Content-Type: text/html
 > > Date: Sun, 24 May 1998 22:31:58 GMT
 > 
 > Are you sure this is being generated by Apache?  It is a 1.0 response, so
 > either the server is configured in a special way or this is really some
 > other script returning the headers.
 > 
 > There is nothing in the output you give that I notice as being invalid.
 > Not usual, but certainly possible to setup Apache to generate.
 > 
 > 
 
>Unformatted:
[In order for any reply to be added to the PR database, ]
[you need to include <apbugs@Apache.Org> in the Cc line ]
[and leave the subject line UNCHANGED.  This is not done]
[automatically because of the potential for mail loops. ]



