Received: (qmail 7349 invoked by uid 2012); 16 Feb 1998 17:18:35 -0000
Message-Id: <19980216171835.7348.qmail@hyperreal.org>
Date: 16 Feb 1998 17:18:35 -0000
From: William Polik <polik@hope.edu>
Reply-To: polik@hope.edu
To: apbugs@hyperreal.org
Subject: exec cmd SSI directive fails in Win95
X-Send-Pr-Version: 3.2

>Number:         1814
>Category:       os-windows
>Synopsis:       exec cmd SSI directive fails in Win95
>Confidential:   no
>Severity:       serious
>Priority:       medium
>Responsible:    apache
>State:          closed
>Class:          sw-bug
>Submitter-Id:   apache
>Arrival-Date:   Mon Feb 16 09:20:00 PST 1998
>Last-Modified:  Mon Sep  7 06:16:56 PDT 1998
>Originator:     polik@hope.edu
>Organization:
>Release:        1.3b3
>Environment:
 Apache/1.3b3 pre-compiled W32 binary on Windows 95
>Description:
Although I have
     * perl working fine
     * CGI scripts (written in perl) working fine
     * SSI echo var working fine
and I believe I have
    * configured srm.conf and access.conf correctly
the SSI exec cmd directives
     <!--#exec cmd="DIR"-->
     <!--#exec cmd="perl c:\htdocs\wfp\ssitest1.cgi"-->
     <!--#exec cmd="/cgi-bin/ssitest1.cgi"-->
returns an error in the logs/error_log:
     encountered error in GET_CHAR macro, mod_include.
     [Mon Feb 16 12:00:17 1998] [error] execution failure for parameter "cmd" to tag exec in file c:/htdocs/wfp/ssitest.shtml
     [Mon Feb 16 12:00:17 1998] [error] execution failure for parameter "cmd" to tag exec in file c:/htdocs/wfp/ssitest.shtml
     [Mon Feb 16 12:00:17 1998] [error] execution failure for parameter "cmd" to tag exec in file c:/htdocs/wfp/ssitest.shtml



>How-To-Repeat:
srm.conf:
=========
DocumentRoot "C:/htdocs"
ScriptAlias /cgi-bin/ "C:/htdocs/cgi-bin/"
AddHandler cgi-script .cgi
AddType text/html .shtml
AddHandler server-parsed .shtml

access.conf:
============
<Directory "C:/htdocs">
Options Indexes FollowSymLinks
AllowOverride None
order allow,deny
allow from all
</Directory>
<Directory "C:/htdocs/cgi-bin">
AllowOverride None
Options None
</Directory>
<Directory "C:/htdocs/WFP">
AllowOverride All
Options All
</Directory>

c:\htdocs\wfp\ssitest.shtml:
============================
<html>
<head>
<title>Test of SSI</title>
</head>
<body>
The next line contains the SSI: echo var="SERVER_SOFTWARE"<BR>
<!--#echo var="SERVER_SOFTWARE"--><P>
The next line contains the SSI: exec cmd="DIR"<BR>
<!--#exec cmd="DIR"--><P>
The next line contains the SSI: exec cmd="perl c:\htdocs\wfp\ssitest1.cgi"<BR>
<!--#exec cmd="perl c:\htdocs\wfp\ssitest1.cgi"--><P>
The next line contains the SSI: exec cmd="/cgi-bin/ssitest1.cgi"<BR>
<!--#exec cmd="/cgi-bin/ssitest1.cgi"--><P>
The next line contains the SSI: exec cgi="/WFP/ssitest1.cgi" NOT (this hangs up Apache)<BR>
<!--exec cgi="/WFP/ssitest1.cgi"--><P>
</body>
</html>

output from Apache:
===================
The next line contains the SSI: echo var="SERVER_SOFTWARE" 
Apache/1.3b3 

The next line contains the SSI: exec cmd="DIR" 
[an error occurred while processing this directive] 

The next line contains the SSI: exec cmd="perl c:\htdocs\wfp\ssitest1.cgi" 
[an error occurred while processing this directive] 

The next line contains the SSI: exec cmd="/cgi-bin/ssitest1.cgi" 
[an error occurred while processing this directive] 

c:\htdocs\wfp\ssitest1.cgi:
===========================
#!C:/Program Files/perl/bin/perl.exe
print "content-type: text/plain\n\n";
print "This text is being generated by a Perl script","\n";
>Fix:

>Audit-Trail:

From: Marc Slemko <marcs@znep.com>
To: William Polik <polik@hope.edu>
Cc: apbugs@hyperreal.org
Subject: Re: mod_include/1814: exec cmd SSI directive fails in Win95
Date: Mon, 16 Feb 1998 10:24:51 -0700 (MST)

 On 16 Feb 1998, William Polik wrote:
 
 > Although I have
 >      * perl working fine
 >      * CGI scripts (written in perl) working fine
 >      * SSI echo var working fine
 > and I believe I have
 >     * configured srm.conf and access.conf correctly
 > the SSI exec cmd directives
 >      <!--#exec cmd="DIR"-->
 
 Possibly related to the fact that "dir" isn't a command, it is just
 something that the command interpreter can parse.
 
 >      <!--#exec cmd="perl c:\htdocs\wfp\ssitest1.cgi"-->
 
 Possibly a problem with not specifying a directory for perl.
 
 >      <!--#exec cmd="/cgi-bin/ssitest1.cgi"-->
 
 Erm... please go through the docs again.  exec cmd runs something from the
 _local_ filesystem.  You don't have a /cgi-bin directory.  Try using
 include virtual instead.
 

From: "William F. Polik" <polik@HOPE.CIT.HOPE.EDU>
To: Marc Slemko <marcs@znep.com>
Cc: apbugs@Apache.Org
Subject: RE: mod_include/1814: exec cmd SSI directive fails in Win95
Date: Tue, 17 Feb 1998 13:21:08 -0500

 At 10:24 AM 2/16/98 -0700, you wrote:
 >>      <!--#exec cmd="DIR"-->
 >
 >Possibly related to the fact that "dir" isn't a command, it is just
 >something that the command interpreter can parse.
 
 This also fails for MEM, which is a built-in command.
 
 >>      <!--#exec cmd="perl c:\htdocs\wfp\ssitest1.cgi"-->
 >
 >Possibly a problem with not specifying a directory for perl.
 
 This fails if I specify the path to perl (both with foward and with back
 slashes)
 
 >>      <!--#exec cmd="/cgi-bin/ssitest1.cgi"-->
 >
 >Erm... please go through the docs again.  exec cmd runs something from the
 >_local_ filesystem.  You don't have a /cgi-bin directory.  Try using
 >include virtual instead.
 
 This was a desperate attempt!
 
 Upon additional reseacrh in the newsgroups, I have not found a single
 instance of someone getting the SSI "exec cmd" to work.
 
 However, I do find one claim of someone getting the SSI "exec cgi" to work:
      Subject:      Re: Apache 1.3b3/Win32  SSI exec cmd ?
      From:         flimflam@sham.org (DiE SpAm, DiE!)
      Date:         1997/11/30
      Message-ID:   <65qnvs$os5@snews3.zippo.com>
      Newsgroups:   comp.infosystems.www.servers.ms-windows
 
      If you are calling a CGI, wether it be a Perl script or compiled
      .EXE, the best SSI call is such as:
 
      <!--#exec cgi="testcgi.exe" -->
 
      Works great for me, hope this helps!!
 
      Andrew
 
 I also see that someone added the following to PR#1721:
      >Fix:
      There is some logic in mod_include that does not execute
      the CMD but executes the .shtml file it came from.
 
      If I get further I will send the code to you.
 
      THANK YOU VERY MUC
 
 My question to you is: Do you have any concrete information that the SSI
 "exec cmd" works in the 1.3b3/win32 version of Apache?  I.e., do you use
 it, or have you seen a report of someone using it?  If so, I've got more
 playing around to do!  If not, I think it doesn't work.
 
 Thanks,
 
 Will Polik
 
 
 ===================================================================
 William F. Polik             email: polik@hope.edu
 Department of Chemistry      url:   http://sgi.chem.hope.edu/~polik
 Hope College                 phone: (616) 395-7639
 35 East 12th Street          fax:   (616) 395-7118
 Holland, MI  49422-9000             
 ===================================================================
Category-Changed-From-To: mod_include-os-windows
Category-Changed-By: dgaudet
Category-Changed-When: Sat Feb 21 02:52:25 PST 1998

Release-Changed-From-To: 1.3b3 (win32)-1.3b3
Release-Changed-By: coar
Release-Changed-When: Thu May 28 12:50:39 PDT 1998
State-Changed-From-To: open-feedback
State-Changed-By: coar
State-Changed-When: Thu May 28 13:07:50 PDT 1998
State-Changed-Why:
[This is a standard response.]
This Apache problem report has not been updated recently.
Please reply to this message if you have any additional
information about this issue, or if you have answers to
any questions that have been posed to you.  If there are
no outstanding questions, please consider this a request
to try to reproduce the problem with the latest software
release, if one has been made since last contact.  If we
don't hear from you, this report will be closed.
State-Changed-From-To: feedback-closed
State-Changed-By: coar
State-Changed-When: Mon Sep  7 06:16:55 PDT 1998
State-Changed-Why:
[This is a standard response.]
No response from submitter, assuming issue has been resolved.
>Unformatted:
[In order for any reply to be added to the PR database, ]
[you need to include <apbugs@Apache.Org> in the Cc line ]
[and leave the subject line UNCHANGED.  This is not done]
[automatically because of the potential for mail loops. ]



