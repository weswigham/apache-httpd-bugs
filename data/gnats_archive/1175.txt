From apwww@hyperreal.org  Mon Sep 29 04:21:53 1997
Received: (from apwww@localhost)
	by hyperreal.org (8.8.5/8.8.5) id EAA13395;
	Mon, 29 Sep 1997 04:21:53 -0700 (PDT)
Message-Id: <199709291121.EAA13395@hyperreal.org>
Date: Mon, 29 Sep 1997 04:21:53 -0700 (PDT)
From: Nikolaus Reisel <ren@adv.magwien.gv.at>
Reply-To: ren@adv.magwien.gv.at
To: apbugs@hyperreal.org
Subject: http.core with SIGSEGV
X-Send-Pr-Version: 3.2

>Number:         1175
>Category:       general
>Synopsis:       http.core with SIGSEGV
>Confidential:   no
>Severity:       critical
>Priority:       medium
>Responsible:    apache
>State:          closed
>Class:          duplicate
>Submitter-Id:   apache
>Arrival-Date:   Mon Sep 29 04:30:02 1997
>Last-Modified:  Thu Nov 13 07:50:00 PST 1997
>Originator:     ren@adv.magwien.gv.at
>Organization:
>Release:        1.2.4
>Environment:
BSD2.1, gcc		
>Description:
GDB is free software and you are welcome to distribute copies of it
 under certain conditions; type "show copying" to see the conditions.
There is absolutely no warranty for GDB; type "show warranty" for details.
GDB 4.15.1 (i386-unknown-bsdi2.1), 
Copyright 1995 Free Software Foundation, Inc...(no debugging symbols found)...
Core was generated by `httpd'.
Program terminated with signal 6, Abort trap.
#0  0x56cb5 in kill ()
(gdb) where
#0  0x56cb5 in kill ()
#1  0x56213 in abort ()
#2  0x3150 in just_die ()
#3  <signal handler called>
#4  0x24a2 in timeout ()
#5  0x133a0 in bwrite ()
#6  0xddf5 in send_fd_length ()
#7  0xdd04 in send_fd ()
#8  0x7e0e in default_handler ()
#9  0x824d in invoke_handler ()
#10 0xad3d in process_request_internal ()
#11 0xad6e in process_request ()
#12 0x3e6d in child_main ()
#13 0x3fe6 in make_child ()
#14 0x482b in standalone_main ()
#15 0x4c50 in main ()
>How-To-Repeat:

>Fix:

>Audit-Trail:
State-Changed-From-To: open-feedback
State-Changed-By: Lars.Eilebrecht@unix-ag.org
State-Changed-When: Mon Sep 29 05:43:02 PDT 1997
State-Changed-Why:

Can you provide more details... does it crash when
you start httpd, when you restart it or on a specific
request? It it crashes on a request, does it crash
always?


From: Marc Slemko <marcs@znep.com>
To: ren@adv.magwien.gv.at
Subject: Re: general/1175: http.core with SIGSEGV
Date: Mon, 29 Sep 1997 08:58:36 -0600 (MDT)

 
 Also, are you running in inetd mode?  
 
 On Mon, 29 Sep 1997 Lars.Eilebrecht@unix-ag.org wrote:
 
 > Synopsis: http.core with SIGSEGV
 > 
 > State-Changed-From-To: open-feedback
 > State-Changed-By: Lars.Eilebrecht@unix-ag.org
 > State-Changed-When: Mon Sep 29 05:43:02 PDT 1997
 > State-Changed-Why:
 > 
 > Can you provide more details... does it crash when
 > you start httpd, when you restart it or on a specific
 > request? It it crashes on a request, does it crash
 > always?
 > 
 > 
 

From: Marc Slemko <marcs@znep.com>
To: Apache bugs database <apbugs@apache.org>
Subject: Re: general/1175: http.core with SIGSEGV (fwd)
Date: Mon, 29 Sep 1997 23:44:36 -0600 (MDT)

 
   This message is in MIME format.  The first part should be readable text,
   while the remaining parts are likely unreadable without MIME-aware tools.
   Send mail to mime@docserver.cac.washington.edu for more info.
 
 --------------546008BBC5D6925F251317B5
 Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
 Content-Transfer-Encoding: QUOTED-PRINTABLE
 Content-ID: <Pine.BSF.3.95.970929234435.1929J@alive.znep.com>
 
 
 
 ---------- Forwarded message ----------
 Date: Tue, 30 Sep 1997 07:15:46 +0200
 From: Nikolaus Reisel <ren@adv.magwien.gv.at>
 To: Marc Slemko <marcs@znep.com>
 Subject: Re: general/1175: http.core with SIGSEGV
 
 Marc Slemko wrote:
 
 > Also, are you running in inetd mode?
 >
 > On Mon, 29 Sep 1997 Lars.Eilebrecht@unix-ag.org wrote:
 >
 > > Synopsis: http.core with SIGSEGV
 > >
 > > State-Changed-From-To: open-feedback
 > > State-Changed-By: Lars.Eilebrecht@unix-ag.org
 > > State-Changed-When: Mon Sep 29 05:43:02 PDT 1997
 > > State-Changed-Why:
 > >
 > > Can you provide more details... does it crash when
 > > you start httpd, when you restart it or on a specific
 > > request? It it crashes on a request, does it crash
 > > always?
 > >
 > >
 
  No I don't run apache in inetd mode - my server run standalone with
 rewrite engine and virtual hosts.
 
 At our office I running about 4 servers with this configuration - all
 server are crashing - sometimes the childs - but often the main server -
 coredumps always near timeout().
 
 The server doesnot answer to any request - after restart (kill -1) -> it
 dumps not always but sometimes.
 
 
 I don't know how to reproduce the error to dump !!!
 
 At error_log only SIGSEGV is shown!
 
 Any ideas ??
 
 
 
 
 --
    _\|/_        REISEL Nikolaus ES4 - Network Development
    (O O)        Municipality of Vienna, Municipal Department 14
 oOO-(_)-OOo     Rathausstra=DFe 1, A-1082 Vienna, Austria
                 E-mail: ren@adv.magwien.gv.at
 
 
 
 --------------546008BBC5D6925F251317B5
 Content-Type: TEXT/HTML; CHARSET=us-ascii
 Content-ID: <Pine.BSF.3.95.970929234435.1929K@alive.znep.com>
 Content-Description: 
 
 <HTML>
 Marc Slemko wrote:
 <BLOCKQUOTE TYPE=CITE>Also, are you running in inetd mode?
 
 <P>On Mon, 29 Sep 1997 Lars.Eilebrecht@unix-ag.org wrote:
 
 <P>> Synopsis: http.core with SIGSEGV
 <BR>>
 <BR>> State-Changed-From-To: open-feedback
 <BR>> State-Changed-By: Lars.Eilebrecht@unix-ag.org
 <BR>> State-Changed-When: Mon Sep 29 05:43:02 PDT 1997
 <BR>> State-Changed-Why:
 <BR>>
 <BR>> Can you provide more details... does it crash when
 <BR>> you start httpd, when you restart it or on a specific
 <BR>> request? It it crashes on a request, does it crash
 <BR>> always?
 <BR>>
 <BR>></BLOCKQUOTE>
 &nbsp;No I don't run apache in inetd mode - my server run standalone with
 rewrite engine and virtual hosts.
 
 <P>At our office I running about 4 servers with this configuration - all
 server are crashing - sometimes the childs - but often the main server
 - coredumps always near timeout().
 
 <P>The server doesnot answer to any request - after restart (kill -1) ->
 it dumps not always but sometimes.
 <BR>&nbsp;
 
 <P>I don't know how to reproduce the error to dump !!!
 
 <P>At error_log only SIGSEGV is shown!
 
 <P>Any ideas ??
 <BR>&nbsp;
 <BR>&nbsp;
 <BR>&nbsp;
 <PRE>--&nbsp;
 &nbsp;&nbsp; _\|/_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; REISEL Nikolaus ES4 - Network Development
 &nbsp;&nbsp; (O O)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Municipality of Vienna, Municipal Department 14
 oOO-(_)-OOo&nbsp;&nbsp;&nbsp;&nbsp; Rathausstra&szlig;e 1, A-1082 Vienna, Austria
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; E-mail: ren@adv.magwien.gv.at</PRE>
 &nbsp;</HTML>
 
 --------------546008BBC5D6925F251317B5--

From: Marc Slemko <marcs@znep.com>
To: Apache bugs database <apbugs@apache.org>
Subject: general/1175
Date: Tue, 30 Sep 1997 07:35:18 -0600 (MDT)

 
   This message is in MIME format.  The first part should be readable text,
   while the remaining parts are likely unreadable without MIME-aware tools.
   Send mail to mime@docserver.cac.washington.edu for more info.
 
 --------------DE113514428F7300E7FF75ED
 Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
 Content-Transfer-Encoding: QUOTED-PRINTABLE
 Content-ID: <Pine.BSF.3.95.970930073502.7190E@alive.znep.com>
 
 
 
 ---------- Forwarded message ----------
 Date: Tue, 30 Sep 1997 13:27:06 +0200
 From: Nikolaus Reisel <ren@adv.magwien.gv.at>
 To: Marc Slemko <marcs@znep.com>
 Subject: more about my SIGSEGV
 
 host>gdb /proxy/apache/bin/httpd httpd.core
 
 GDB is free software and you are welcome to distribute copies of it
  under certain conditions; type "show copying" to see the conditions.
 There is absolutely no warranty for GDB; type "show warranty" for
 details.
 GDB 4.15.1 (i386-unknown-bsdi2.1),
 Copyright 1995 Free Software Foundation, Inc...(no debugging symbols
 found)...
 Core was generated by `httpd'.
 Program terminated with signal 6, Abort trap.
 #0  0x56cb5 in kill ()
 (gdb) where
 #0  0x56cb5 in kill ()
 #1  0x56213 in abort ()
 #2  0x3150 in just_die ()
 #3  <signal handler called>
 #4  0x4352 in copy_listeners ()
 #5  0x4c50 in main ()
 
 All childs die - after a restart (kill -1) the hole server dies !!
 I hope this can help to solve the problem
 
 --
    _\|/_        REISEL Nikolaus ES4 - Network Development
    (O O)        Municipality of Vienna, Municipal Department 14
 oOO-(_)-OOo     Rathausstra=DFe 1, A-1082 Vienna, Austria
                 E-mail: ren@adv.magwien.gv.at
 
 
 
 --------------DE113514428F7300E7FF75ED
 Content-Type: TEXT/HTML; CHARSET=us-ascii
 Content-ID: <Pine.BSF.3.95.970930073502.7190F@alive.znep.com>
 Content-Description: 
 
 <HTML>
 host>gdb /proxy/apache/bin/httpd httpd.core
 
 <P>GDB is free software and you are welcome to distribute copies of it
 <BR>&nbsp;under certain conditions; type "show copying" to see the conditions.
 <BR>There is absolutely no warranty for GDB; type "show warranty" for details.
 <BR>GDB 4.15.1 (i386-unknown-bsdi2.1),
 <BR>Copyright 1995 Free Software Foundation, Inc...(no debugging symbols
 found)...
 <BR>Core was generated by `httpd'.
 <BR>Program terminated with signal 6, Abort trap.
 <BR>#0&nbsp; 0x56cb5 in kill ()
 <BR>(gdb) where
 <BR>#0&nbsp; 0x56cb5 in kill ()
 <BR>#1&nbsp; 0x56213 in abort ()
 <BR>#2&nbsp; 0x3150 in just_die ()
 <BR>#3&nbsp; &lt;signal handler called>
 <BR>#4&nbsp; 0x4352 in copy_listeners ()
 <BR>#5&nbsp; 0x4c50 in main ()
 
 <P>All childs die - after a restart (kill -1) the hole server dies !!
 <BR>I hope this can help to solve the problem
 <PRE>--&nbsp;
 &nbsp;&nbsp; _\|/_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; REISEL Nikolaus ES4 - Network Development
 &nbsp;&nbsp; (O O)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Municipality of Vienna, Municipal Department 14
 oOO-(_)-OOo&nbsp;&nbsp;&nbsp;&nbsp; Rathausstra&szlig;e 1, A-1082 Vienna, Austria
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; E-mail: ren@adv.magwien.gv.at</PRE>
 &nbsp;</HTML>
 
 --------------DE113514428F7300E7FF75ED--

From: Marc Slemko <marcs@znep.com>
To: Nikolaus Reisel <ren@adv.magwien.gv.at>
Subject: general/1175:
Date: Tue, 30 Sep 1997 07:36:49 -0600 (MDT)

 
 On Tue, 30 Sep 1997, Nikolaus Reisel wrote:
 
 > host>gdb /proxy/apache/bin/httpd httpd.core
 > 
 > GDB is free software and you are welcome to distribute copies of it
 >  under certain conditions; type "show copying" to see the conditions.
 > There is absolutely no warranty for GDB; type "show warranty" for
 > details.
 > GDB 4.15.1 (i386-unknown-bsdi2.1),
 > Copyright 1995 Free Software Foundation, Inc...(no debugging symbols
 > found)...
 > Core was generated by `httpd'.
 > Program terminated with signal 6, Abort trap.
 > #0  0x56cb5 in kill ()
 
 Try adding "-g" to the EXTRA_CFLAGS line of your Configuration file and
 recompiling Apache.  Then wait until you get another core dump and it
 should be more informative.
 
 If you can be certain that your new binary is unchanged except for the
 addition of the -g, you should be able to use the old coredump with the
 new binary to get more information.
 
 > (gdb) where
 > #0  0x56cb5 in kill ()
 > #1  0x56213 in abort ()
 > #2  0x3150 in just_die ()
 > #3  <signal handler called>
 > #4  0x4352 in copy_listeners ()
 > #5  0x4c50 in main ()
 > 
 > All childs die - after a restart (kill -1) the hole server dies !!
 > I hope this can help to solve the problem
 > 
 > --
 >    _\|/_        REISEL Nikolaus ES4 - Network Development
 >    (O O)        Municipality of Vienna, Municipal Department 14
 > oOO-(_)-OOo     Rathausstraße 1, A-1082 Vienna, Austria
 >                 E-mail: ren@adv.magwien.gv.at
 > 
 > 
 > 
 

From: Marc Slemko <marcs@znep.com>
To: Apache bugs database <apbugs@apache.org>
Subject: Re: general/1175: (fwd)
Date: Tue, 30 Sep 1997 08:27:45 -0600 (MDT)

 
   This message is in MIME format.  The first part should be readable text,
   while the remaining parts are likely unreadable without MIME-aware tools.
   Send mail to mime@docserver.cac.washington.edu for more info.
 
 --------------F5142D628725F50A63BDF4AE
 Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
 Content-Transfer-Encoding: QUOTED-PRINTABLE
 Content-ID: <Pine.BSF.3.95.970930082742.7190J@alive.znep.com>
 
 
 
 ---------- Forwarded message ----------
 Date: Tue, 30 Sep 1997 16:14:30 +0200
 From: Nikolaus Reisel <ren@adv.magwien.gv.at>
 To: Marc Slemko <marcs@znep.com>
 Subject: Re: general/1175:
 
 Marc Slemko wrote:
 
 > Try adding "-g" to the EXTRA_CFLAGS line of your Configuration file and
 > recompiling Apache.  Then wait until you get another core dump and it
 > should be more informative.
 >
 > If you can be certain that your new binary is unchanged except for the
 > addition of the -g, you should be able to use the old coredump with the
 > new binary to get more information.
 
 Now this is done with "-g" Flags but with old core:
 
 gdb /proxy/apache/bin/httpd_1.2.4-g /tmp/httpd.core
 GDB is free software and you are welcome to distribute copies of it
  under certain conditions; type "show copying" to see the conditions.
 There is absolutely no warranty for GDB; type "show warranty" for details.
 
 GDB 4.15.1 (i386-unknown-bsdi2.1),
 Copyright 1995 Free Software Foundation, Inc...
 
 warning: exec file is newer than core file.
 Core was generated by `httpd'.
 Program terminated with signal 6, Abort trap.
 #0  0x56cb5 in getpid ()
 (gdb) where
 #0  0x56cb5 in getpid ()
 #1  0x56213 in abort ()
 #2  0x3150 in deferred_die_handler () at http_main.c:1289
 #3  <signal handler called>
 #4  0x4352 in copy_listeners (p=3D0x3) at http_main.c:2106
 #5  0x4c50 in main (argc=3D3, argv=3D0xefbfdf38) at http_main.c:2445
 
 Hope this can help you !!
 
 --
    _\|/_        REISEL Nikolaus ES4 - Network Development
    (O O)        Municipality of Vienna, Municipal Department 14
 oOO-(_)-OOo     Rathausstra=DFe 1, A-1082 Vienna, Austria
                 E-mail: ren@adv.magwien.gv.at
 
 
 
 --------------F5142D628725F50A63BDF4AE
 Content-Type: TEXT/HTML; CHARSET=us-ascii
 Content-ID: <Pine.BSF.3.95.970930082742.7190K@alive.znep.com>
 Content-Description: 
 
 <HTML>
 Marc Slemko wrote:
 <BLOCKQUOTE TYPE=CITE>Try adding "-g" to the EXTRA_CFLAGS line of your
 Configuration file and
 <BR>recompiling Apache.&nbsp; Then wait until you get another core dump
 and it
 <BR>should be more informative.
 
 <P>If you can be certain that your new binary is unchanged except for the
 <BR>addition of the -g, you should be able to use the old coredump with
 the
 <BR>new binary to get more information.</BLOCKQUOTE>
 Now this is done with "-g" Flags but with old core:
 
 <P>gdb /proxy/apache/bin/httpd_1.2.4-g /tmp/httpd.core
 <BR>GDB is free software and you are welcome to distribute copies of it
 <BR>&nbsp;under certain conditions; type "show copying" to see the conditions.
 <BR>There is absolutely no warranty for GDB; type "show warranty" for details.
 <BR>GDB 4.15.1 (i386-unknown-bsdi2.1),
 <BR>Copyright 1995 Free Software Foundation, Inc...
 
 <P>warning: exec file is newer than core file.
 <BR>Core was generated by `httpd'.
 <BR>Program terminated with signal 6, Abort trap.
 <BR>#0&nbsp; 0x56cb5 in getpid ()
 <BR>(gdb) where
 <BR>#0&nbsp; 0x56cb5 in getpid ()
 <BR>#1&nbsp; 0x56213 in abort ()
 <BR>#2&nbsp; 0x3150 in deferred_die_handler () at http_main.c:1289
 <BR>#3&nbsp; &lt;signal handler called>
 <BR>#4&nbsp; 0x4352 in copy_listeners (p=0x3) at http_main.c:2106
 <BR>#5&nbsp; 0x4c50 in main (argc=3, argv=0xefbfdf38) at http_main.c:2445
 
 <P>Hope this can help you !!
 <PRE>--&nbsp;
 &nbsp;&nbsp; _\|/_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; REISEL Nikolaus ES4 - Network Development
 &nbsp;&nbsp; (O O)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Municipality of Vienna, Municipal Department 14
 oOO-(_)-OOo&nbsp;&nbsp;&nbsp;&nbsp; Rathausstra&szlig;e 1, A-1082 Vienna, Austria
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; E-mail: ren@adv.magwien.gv.at</PRE>
 &nbsp;</HTML>
 
 --------------F5142D628725F50A63BDF4AE--

From: Dean Gaudet <dgaudet@arctic.org>
To: Nikolaus Reisel <ren@adv.magwien.gv.at>
Subject: Re: general/1175: (fwd)
Date: Tue, 30 Sep 1997 09:49:15 -0700 (PDT)

 
 Unfortunately recompiling with -g changed the executable enough that it
 doesn't match the old core file.  So when you get a new core file with the
 new executable please use gdb on it again. 
 
 Are you using any non-standard modules or patches, or is it just plain
 1.2.4 downloaded from www.apache.org? 
 
 Thanks
 Dean
 
State-Changed-From-To: feedback-closed
State-Changed-By: coar
State-Changed-When: Thu Nov 13 07:50:00 PST 1997
State-Changed-Why:
[This is a standard response.]
No response from submitter, assuming issue has been resolved.
Class-Changed-From-To: sw-bug-duplicate
Class-Changed-By: coar
Class-Changed-When: Thu Nov 13 07:50:00 PST 1997
>Unformatted:








