Received: (qmail 20303 invoked by uid 2012); 11 Nov 1998 14:31:47 -0000
Message-Id: <19981111143147.20302.qmail@hyperreal.org>
Date: 11 Nov 1998 14:31:47 -0000
From: Vaclav Ovsik <ovsik@skoda.cz>
Reply-To: ovsik@skoda.cz
To: apbugs@hyperreal.org
Subject: APACI configure fails to difference shared/static module when one module name is postfix of other (eg. cgi x fastcgi)
X-Send-Pr-Version: 3.2

>Number:         3380
>Category:       config
>Synopsis:       APACI configure fails to difference shared/static module when one module name is postfix of other (eg. cgi x fastcgi)
>Confidential:   no
>Severity:       non-critical
>Priority:       medium
>Responsible:    apache
>State:          closed
>Class:          sw-bug
>Submitter-Id:   apache
>Arrival-Date:   Wed Nov 11 06:40:01 PST 1998
>Last-Modified:  Sun Dec  6 07:40:42 PST 1998
>Originator:     ovsik@skoda.cz
>Organization:
>Release:        1.3.3
>Environment:
Linux 2.0.35 (RedHat 5.1)
>Description:
I tried to modify rpm from RH5.2 apache-1.3.3-1.src.rpm from RedHat,
simply by adding FastCGI.
I tried to use APACI and add module fastcgi by --activate-module
and also disabling shared by --disable-shared=fastcgi.
But there was module cgi configured like shared module before module fastcgi
on command line.
When file Configuration.apaci was generated by configure,
the group of sed substitutions was generated. There is the bug,
because substitution for module cgi match for line with fastcgi
and line "SharedModule ..." instead of "AddModule ..." was generated.

>How-To-Repeat:

>Fix:
There should be some word delimiter in sed substitutions patterns.
I think something like '\<' before $module in patterns should help.
>Audit-Trail:
State-Changed-From-To: open-closed
State-Changed-By: rse
State-Changed-When: Sun Dec  6 07:40:41 PST 1998
State-Changed-Why:
Using something like '\<' would fail for mod_proxy
which uses "libproxy" and not "mod_proxy". I've
done it now with [_b/] in front of $module. This
should work for all cases I know of. 
Thanks for your feedback.
>Unformatted:
[In order for any reply to be added to the PR database, ]
[you need to include <apbugs@Apache.Org> in the Cc line ]
[and leave the subject line UNCHANGED.  This is not done]
[automatically because of the potential for mail loops. ]
[If you do not include this Cc, your reply may be ig-   ]
[nored unless you are responding to an explicit request ]
[from a developer.                                      ]
[Reply only with text; DO NOT SEND ATTACHMENTS!         ]



